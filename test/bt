#! /usr/bin/env dbqn

dRun ← ⟨"dRun"⟩ •EX •path∾"../dcshim.bqn"
l ← ∾(•LNS •path∾∾⟜"cases.bqn")¨""‿"b"
{ l ∾↩ "1 %"⊸∾¨ (3≤≠)◶0‿(('#'≠2⊸⊑)∧"  "≡2⊸↑)¨⊸/ •LNS •path∾"testref.bqn" }⍟⊢(<"-ref")∊•args
c ← (¬"{"⊑∘∊⊢)¨⊸/ l
M ← {e‿b: (⍎e)⊸≢◶""‿{(•UCS 10)∾˜""""∾b∾""": expected "∾e∾" but received "∾⍕𝕩} DRun b}
r ← '%' M∘((+`-2⊸×)∘=⊔⊢)¨ c
• ← "All passed!"⍟(0=≠) ∾r
